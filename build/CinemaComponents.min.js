// Cinema Components v2.0. Copyright 2018 Los Alamos National Laboratory
'use strict';(function(){var CINEMA_COMPONENTS={}
if(window.CINEMA_COMPONENTS)
CINEMA_COMPONENTS=window.CINEMA_COMPONENTS;else
window.CINEMA_COMPONENTS=CINEMA_COMPONENTS;CINEMA_COMPONENTS.DATABASE_INCLUDED=true;CINEMA_COMPONENTS.DIMENSION_TYPE=Object.freeze({INTEGER:0,FLOAT:1,STRING:2});CINEMA_COMPONENTS.Database=function(directory,callback,errorCallback){this.directory=directory;this.loaded=false;this.error;this.data=[];this.dimensions=[];this.dimensionTypes={};this.dimensionDomains={};var self=this;getAndParseCSV(directory+'/data.csv',function(data_arr){self.error=checkErrors(data_arr);if(self.error){if(errorCallback)
errorCallback();return;}
self.dimensions=data_arr[0];self.data=data_arr.slice(1).map(function(d){var obj={};self.dimensions.forEach(function(p,i){obj[p]=d[i];});return obj;});self.dimensions.forEach(function(d){var val=self.data[0][d];if(!isNaN(val)||val.toUpperCase()==="NAN"){if(isNaN(val)||!Number.isInteger(val))
self.dimensionTypes[d]=CINEMA_COMPONENTS.DIMENSION_TYPE.FLOAT;else
self.dimensionTypes[d]=CINEMA_COMPONENTS.DIMENSION_TYPE.INTEGER;var i;for(i=0;i<self.data.length&&isNaN(self.data[i][d]);i++){}
if(i==self.data.length)
self.dimensionDomains[d]=[0,0]
else{var min=self.data[i][d];var max=self.data[i][d];for(var j=i;j<self.data.length;j++){if(!isNaN(self.data[j][d])){min=Math.min(min,self.data[j][d]);max=Math.max(max,self.data[j][d]);}}
self.dimensionDomains[d]=[min,max];}}
else{self.dimensionTypes[d]=CINEMA_COMPONENTS.DIMENSION_TYPE.STRING;self.dimensionDomains[d]=self.data.map(function(p){return p[d];});}});self.loaded=true;if(callback)
callback(self);});};CINEMA_COMPONENTS.Database.prototype.isStringDimension=function(dimension){return this.dimensionTypes[dimension]===CINEMA_COMPONENTS.DIMENSION_TYPE.STRING;};CINEMA_COMPONENTS.Database.prototype.getSimilar=function(query,threshold){var self=this;var similar=[];this.data.forEach(function(row,index){var dist=0;self.dimensions.forEach(function(d){if(query[d]!==undefined){if(self.isStringDimension(d))
dist+=(row[d]==query[d]?0:1);else{if(isNaN(query[d]))
dist+=(isNaN(row[d])?0:1);else if(row[d]===undefined)
dist+=1;else{var extent=self.dimensionDomains[d];dist+=Math.abs(getNormalizedValue(query[d],extent[0],extent[1])
-
getNormalizedValue(row[d],extent[0],extent[1]));}}}});if(dist<=threshold){similar.push(index);}});return similar;}
var getAndParseCSV=function(path,callback){var request=new XMLHttpRequest();request.open("GET",path,true);request.onreadystatechange=function(){if(request.readyState===4){if(request.status===200||request.status===0){var data=parseCSV(request.responseText);if(callback)
callback(data);}}}
request.send(null);}
var getNormalizedValue=function(val,min,max){return(max-min==0)?0:((val-min)/(max-min));}
var parseCSV=function(csvText){var csvRegex=/(\,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^\,\r\n]*))/gi;var data=[];var matches;if(csvText==="")
return data;while(matches=csvRegex.exec(csvText)){var delimiter=matches[1];var quotedValue=matches[2];var value=matches[3];if(delimiter!=',')
data.push([]);if(quotedValue!==undefined)
data[data.length-1].push(quotedValue.replace(/""/g,"\""));else
data[data.length-1].push(value===""?undefined:value.replace(/""/g,"\""));}
if(data.length>1&&data[data.length-1].length==1&&data[data.length-1][0]===undefined){data=data.slice(0,data.length-1);}
return data;}
var checkErrors=function(data){if(data.length<2)
return"The first and second lines in the file are required.";var emptyValFound=false;for(var i in data[0])
emptyValFound=emptyValFound||(data[0][i]===undefined);for(var i in data[1])
emptyValFound=emptyValFound||(data[1][i]===undefined);if(emptyValFound)
return"Empty values may not occur in the header (first line) or first data row (second line).";var testLength=data[0].length;for(var i in data)
if(data[i].length!=testLength)
return"Each line must have an equal number of comma separated values (columns).";}})();'use strict';(function(){var CINEMA_COMPONENTS={}
if(window.CINEMA_COMPONENTS)
CINEMA_COMPONENTS=window.CINEMA_COMPONENTS;else
window.CINEMA_COMPONENTS=CINEMA_COMPONENTS;if(!CINEMA_COMPONENTS.DATABASE_INCLUDED)
throw new Error("CINEMA_COMPONENTS Component module requires that Database"+" module be included. Please make sure that Database module"+" is included BEFORE Component module");CINEMA_COMPONENTS.COMPONENT_INCLUDED=true;CINEMA_COMPONENTS.Component=function(parent,database,filterRegex){if(this.constructor===CINEMA_COMPONENTS.Component)
throw new Error("Cannot instantiate abstract class 'Component.'"+" Please use a subclass.");this.parent=parent;this.parent.innerHTML='';this.db=database;this.dimensions=[];this.filter=filterRegex;this.dimensions=this.db.dimensions.filter(function(d){return filterRegex?!filterRegex.test(d):true;});this.container=parent.appendChild(document.createElement('div'));this.container.setAttribute('class','CINEMA_COMPONENT');this.container.style.position='relative';CINEMA_COMPONENTS.Component.prototype.updateSize.call(this);};CINEMA_COMPONENTS.Component.prototype.updateSize=function(){this.margin=this.margin||new CINEMA_COMPONENTS.Margin(0,0,0,0);this.parentRect=this.parent.getBoundingClientRect();this.internalWidth=this.parentRect.width-this.margin.left-this.margin.right;this.internalHeight=this.parentRect.height-this.margin.top-this.margin.bottom;this.container.style.width=this.parentRect.width+'px'
this.container.style.height=this.parentRect.height+'px';};CINEMA_COMPONENTS.Margin=function(top,right,bottom,left){this.top=top;this.right=right;this.bottom=bottom;this.left=left;}
CINEMA_COMPONENTS.ExtraData=function(data,style){this.data=data;this.style=style;}})();'use strict';(function(){var CINEMA_COMPONENTS={}
if(window.CINEMA_COMPONENTS)
CINEMA_COMPONENTS=window.CINEMA_COMPONENTS;else
window.CINEMA_COMPONENTS=CINEMA_COMPONENTS;if(!CINEMA_COMPONENTS.COMPONENT_INCLUDED)
throw new Error("CINEMA_COMPONENTS Glyph module requires that Component"+" module be included. Please make sure that Component module"+" is included BEFORE Glyph module");if(!window.d3){throw new Error("CINEMA_COMPONENTS Glyph module requires that"+" d3 be included (at least d3v4). Please make sure that d3 is included BEFORE the"+" the Glyph module");}
CINEMA_COMPONENTS.GLYPH_INCLUDED=true;var RADTODEG=(180/Math.PI),DEGTORAD=(Math.PI/180);CINEMA_COMPONENTS.Glyph=function(parent,database,filterRegex){var self=this;this.margin=new CINEMA_COMPONENTS.Margin(50,50,50,50);this.innerMargin;this.radius;CINEMA_COMPONENTS.Component.call(this,parent,database,filterRegex);this.radius=Math.min(this.internalHeight,this.internalWidth)/2;this.innerMargin=this.radius/11;this.selected=0;this.rotation=d3.scalePoint().domain(this.dimensions).range([0,Math.PI*2-Math.PI*2/(this.dimensions.length+1)]);this.scales={};this.dimensions.forEach(function(d){if(self.db.isStringDimension(d))
self.scales[d]=d3.scalePoint().domain(self.db.dimensionDomains[d]).range([self.radius-self.innerMargin,0]);else
self.scales[d]=d3.scaleLinear().domain(self.db.dimensionDomains[d]).range([self.radius-self.innerMargin,0]);});d3.select(this.container).classed('GLYPH',true);this.svg=d3.select(this.container).append('svg').attr('class','glyphChart').attr('viewBox',(-this.margin.right)+' '+(-this.margin.top)+' '+
(this.parentRect.width)+' '+
(this.parentRect.height)).attr('preserveAspectRatio','none').attr('width','100%').attr('height','100%');this.path=this.svg.append('path').classed('glyph',true);this.labels=self.svg.append('g').classed('labels',true).selectAll('g.label').data(this.dimensions).enter().append('g').classed('label',true).attr('transform',function(d){return self.getAxisTransform(d);});this.labels.append('text').style('text-anchor','middle').text(function(d){return d;}).attr('transform',function(d){return"translate(0 -15) "
+"rotate("+self.getTextRotation(d)+")";});this.axisContainer=this.svg.append('g').classed('axisContainer',true);this.axes=this.axisContainer.selectAll('.axisGroup').data(this.dimensions).enter().append('g').classed('axisGroup',true).attr('transform',function(d){return self.getAxisTransform(d);});this.axes.append('g').classed('axis',true).each(function(d){d3.select(this).call(d3.axisLeft().scale(self.scales[d]));d3.select(this).selectAll('text').style('text-anchor','end').attr('transform',"rotate("+self.getTextRotation(d)+" -15 0)");});this.redraw();}
CINEMA_COMPONENTS.Glyph.prototype=Object.create(CINEMA_COMPONENTS.Component.prototype);CINEMA_COMPONENTS.Glyph.prototype.constructor=CINEMA_COMPONENTS.Glyph;CINEMA_COMPONENTS.Glyph.prototype.getPath=function(p){var self=this;var path;var startPoint;this.dimensions.forEach(function(d,i){var point=self.getPoint(d,p);if(i==0){startPoint=point;path="M "+point.x+" "+point.y+" "}
else if(i==self.dimensions.length-1){path+="L "+point.x+" "+point.y+" "+"L "+startPoint.x+" "+startPoint.y;}
else{path+="L "+point.x+" "+point.y+" ";}});return path;}
CINEMA_COMPONENTS.Glyph.prototype.getPoint=function(d,p){if(isNaN(p[d]))
return{x:this.radius,y:this.radius};var len=this.radius-this.scales[d](p[d]);var rot=this.rotation(d)-Math.PI/2;var x=Math.cos(rot)*len;var y=Math.sin(rot)*len;return{x:x+this.radius,y:y+this.radius};}
CINEMA_COMPONENTS.Glyph.prototype.updateSize=function(){var self=this;CINEMA_COMPONENTS.Component.prototype.updateSize.call(this);this.radius=Math.min(this.internalHeight,this.internalWidth)/2;this.innerMargin=this.radius/11;this.svg.attr('viewBox',(-this.margin.right)+' '+(-this.margin.top)+' '+
(this.parentRect.width)+' '+
(this.parentRect.height))
this.dimensions.forEach(function(d){self.scales[d].range([self.radius-self.innerMargin,0]);});this.axes.attr('transform',function(d){return self.getAxisTransform(d);}).each(function(d){d3.select(this).call(d3.axisLeft().scale(self.scales[d]));});this.labels.attr('transform',function(d){return self.getAxisTransform(d);});this.path.attr('d',function(d){return self.getPath(self.db.data[d]);});};CINEMA_COMPONENTS.Glyph.prototype.setSelected=function(index){this.selected=index;this.redraw();};CINEMA_COMPONENTS.Glyph.prototype.redraw=function(){var self=this;this.path.datum(this.selected).transition(1000).attr('d',function(d){return self.getPath(self.db.data[d]);});}
CINEMA_COMPONENTS.Glyph.prototype.getAxisTransform=function(d){var r=this.radius;var rot=this.rotation(d)*RADTODEG;return"translate("+r+") "+"rotate("+rot+" 0 "+r+")";};CINEMA_COMPONENTS.Glyph.prototype.getTextRotation=function(d){var rot=this.rotation(d)*(180/Math.PI);return(rot>90&&rot<270)?180:0;}})();'use strict';(function(){var CINEMA_COMPONENTS={}
if(window.CINEMA_COMPONENTS)
CINEMA_COMPONENTS=window.CINEMA_COMPONENTS;else
window.CINEMA_COMPONENTS=CINEMA_COMPONENTS;if(!CINEMA_COMPONENTS.COMPONENT_INCLUDED)
throw new Error("CINEMA_COMPONENTS Pcoord module requires that Component"+" module be included. Please make sure that Component module"+" is included BEFORE Pcoord module");if(!window.d3){throw new Error("CINEMA_COMPONENTS Pcoord module requires that"+" d3 be included (at least d3v4). Please make sure that d3 is included BEFORE the"+" the Pcoord module");}
CINEMA_COMPONENTS.PCOORD_INCLUDED=true;CINEMA_COMPONENTS.Pcoord=function(parent,database,filterRegex){if(this.constructor===CINEMA_COMPONENTS.Pcoord)
throw new Error("Cannot instantiate abstract class 'Pcoord'"+" Please use a subclass");var self=this;this.margin=new CINEMA_COMPONENTS.Margin(30,10,10,10);this.NaNMargin;CINEMA_COMPONENTS.Component.call(this,parent,database,filterRegex);this.NaNMargin=this.internalHeight/11;this.selection=d3.range(0,this.db.data.length);this.highlighted=[];this.overlayData=[];this.dispatch=d3.dispatch("selectionchange","mouseover","click");this.x=d3.scalePoint().domain(this.dimensions).range([0,this.internalWidth]).padding(1);this.y={};this.dimensions.forEach(function(d){if(self.db.isStringDimension(d))
self.y[d]=d3.scalePoint().domain(self.db.dimensionDomains[d]).range([self.internalHeight,0]);else
self.y[d]=d3.scaleLinear().domain(self.db.dimensionDomains[d]).range([self.internalHeight-self.NaNMargin,0]);});this.dragging={};this.axisDragStart=function(d){self.dragging[d]=self.x(d);};this.axisDrag=function(d){self.dragging[d]=Math.min(self.internalWidth,Math.max(0,d3.event.x));self.redrawPaths();self.dimensions.sort(function(a,b){return self.getXPosition(a)-self.getXPosition(b);});self.x.domain(self.dimensions);self.axes.attr('transform',function(d){return"translate("+self.getXPosition(d)+")";});};this.axisDragEnd=function(d){delete self.dragging[d];d3.select(this).attr('transform',"translate("+self.x(d)+")");self.redrawPaths();};this.drag=d3.drag().subject(function(d){return{x:self.x(d)};}).on('start',this.axisDragStart).on('drag',this.axisDrag).on('end',this.axisDragEnd);this.brushExtents={}
this.dontUpdateSelectionOnBrush=false;this.axisBrush=function(d){if(d3.event!=null){self.brushExtents[d]=d3.event.selection;if(self.brushExtents[d]!=null&&self.brushExtents[d][0]===self.brushExtents[d][1])
delete self.brushExtents[d];}
if(!self.dontUpdateSelectionOnBrush)
self.updateSelection();}
this.brush=d3.brushY().extent([[-8,0],[8,this.internalHeight]]).on('start',function(){d3.event.sourceEvent.stopPropagation();}).on('start brush',this.axisBrush);d3.select(this.container).classed('PCOORD',true);this.pathContainer=d3.select(this.container).append('div').classed('pathContainer',true).style('position','absolute').style('width',this.parentRect.width+'px').style('height',this.parentRect.height+'px');this.smoothPaths=true;this.axisContainer=d3.select(this.container).append('svg').classed('axisContainer',true).style('position','absolute').attr('viewBox',(-this.margin.right)+' '+(-this.margin.top)+' '+
(this.parentRect.width)+' '+
(this.parentRect.height)).attr('preserveAspectRatio','none').attr('width','100%').attr('height','100%').style('pointer-events','none');this.axes=this.axisContainer.selectAll('.axisGroup').data(this.dimensions).enter().append('g').classed('axisGroup',true).attr('transform',function(d){return"translate("+self.x(d)+")";}).call(this.drag)
this.axes.append('g').classed('axis',true).each(function(d){d3.select(this).call(d3.axisLeft().scale(self.y[d]));if(!self.db.isStringDimension(d))
self.addNaNExtensionToAxis(this);}).append('text').classed('axisTitle',true).style('pointer-events','initial').style('text-anchor','middle').attr('y',-9).text(function(d){return d;});this.axes.append('g').classed('brush',true).each(function(){d3.select(this).call(self.brush);});};CINEMA_COMPONENTS.Pcoord.prototype=Object.create(CINEMA_COMPONENTS.Component.prototype);CINEMA_COMPONENTS.Pcoord.prototype.constructor=CINEMA_COMPONENTS.Pcoord;CINEMA_COMPONENTS.Pcoord.prototype.addNaNExtensionToAxis=function(node){d3.select(node).append('path').attr('class','NaNExtension').attr('d',"M0.5,"+String(this.internalHeight-this.NaNMargin+0.5)+"V"+String(this.internalHeight-0.5));var NaNTick=d3.select(node).append('g').attr('class','NaNExtensionTick').attr('transform',"translate(0,"+String(this.internalHeight-0.5)+")");NaNTick.append('line').attr('x2','-6');NaNTick.append('text').attr('x','-9').attr('dy','0.32em').text('NaN');}
CINEMA_COMPONENTS.Pcoord.prototype.updateSize=function(){var self=this;var oldHeight=this.internalHeight;CINEMA_COMPONENTS.Component.prototype.updateSize.call(this);this.NaNMargin=this.internalHeight/11;this.pathContainer.style('width',this.parentRect.width+'px').style('height',this.parentRect.height+'px');this.x.range([0,this.internalWidth]);this.dimensions.forEach(function(d){self.y[d].range([self.db.isStringDimension(d)?self.internalHeight:self.internalHeight-self.NaNMargin,0]);});this.redrawPaths();this.axisContainer.attr('viewBox',(-this.margin.right)+' '+(-this.margin.top)+' '+
(this.parentRect.width)+' '+
(this.parentRect.height));this.axes.attr("transform",function(d){return"translate("+self.getXPosition(d)+")";});this.axes.each(function(d){d3.select(this).call(d3.axisLeft().scale(self.y[d]));if(!self.db.isStringDimension(d)){d3.select(this).select('path.NaNExtension').attr('d',"M0.5,"+String(self.internalHeight-self.NaNMargin+0.5)+"V"+String(self.internalHeight-0.5));d3.select(this).select('.NaNExtensionTick').attr('transform',"translate(0,"+String(self.internalHeight-0.5)+")");}});this.dontUpdateSelectionOnBrush=true;this.brush.extent([[-8,0],[8,this.internalHeight]]);this.axes.selectAll('g.brush').each(function(d){d3.select(this).call(self.brush);d3.select(this).call(self.brush.move,function(){if(self.brushExtents[d]==null)
return null;return self.brushExtents[d].map(function(i){return i/oldHeight*self.internalHeight;});});});this.dontUpdateSelectionOnBrush=false;}
CINEMA_COMPONENTS.Pcoord.prototype.updateSelection=function(){var self=this;var newSelection=[];this.db.data.forEach(function(d,i){var selected=true;for(var p in self.dimensions){var extent=self.brushExtents[self.dimensions[p]];if(extent){var y=self.getYPosition(self.dimensions[p],d);selected=selected&&extent[0]<=y&&y<=extent[1];if(!selected)
break;}}
if(selected)
newSelection.push(i);});if(!arraysEqual(this.selection,newSelection)){this.selection=newSelection;this.dispatch.call("selectionchange",this,this.selection);this.redrawSelectedPaths();}}
CINEMA_COMPONENTS.Pcoord.prototype.setHighlightedPaths=function(indices){this.highlighted=indices;this.redrawHighlightedPaths();}
CINEMA_COMPONENTS.Pcoord.prototype.setOverlayPaths=function(data){this.overlayData=data;this.redrawOverlayPaths();};CINEMA_COMPONENTS.Pcoord.prototype.redrawPaths=function(){this.redrawSelectedPaths();this.redrawHighlightedPaths();this.redrawOverlayPaths();}
CINEMA_COMPONENTS.Pcoord.prototype.setSelection=function(selection){var ranges={};var self=this;this.dimensions.forEach(function(d){ranges[d]=d3.extent(selection,function(i){return self.getYPosition(d,self.db.data[i]);});});this.axes.selectAll('g.brush').each(function(d){d3.select(this).call(self.brush.move,function(){return[ranges[d][0]-5,ranges[d][1]+5];});});this.axisBrush();}
CINEMA_COMPONENTS.Pcoord.prototype.redrawSelectedPaths=function(){throw new Error("Cannot call abstract function 'redrawSelectedPaths()'!"+" Please override function in a subclass");}
CINEMA_COMPONENTS.Pcoord.prototype.redrawHighlightedPaths=function(){throw new Error("Cannot call abstract function 'redrawHighlightedPaths()'!"+" Please override function in a subclass");}
CINEMA_COMPONENTS.Pcoord.prototype.redrawOverlayPaths=function(){throw new Error("Cannot call abstract function 'redrawOverlayPaths()'!"+" Please override function in a subclass");}
CINEMA_COMPONENTS.Pcoord.prototype.getPath=function(d){var self=this;var curveLength=this.smoothPaths?this.internalWidth/this.dimensions.length/3:0;var singleSegmentLength=this.internalWidth/this.dimensions.length/5;var path='';var sections=[];var currentSection=[];this.dimensions.forEach(function(p){if(d[p]!=undefined){currentSection.push(p);}
else if(currentSection.length!=0){sections.push(currentSection.slice());currentSection=[];}});if(currentSection.length>0)
sections.push(currentSection.slice());sections.forEach(function(section){if(section.length==1){var p=section[0];var x=self.getXPosition(p);var y=self.getYPosition(p,d);path+=('M '+(x-singleSegmentLength/2)+' '+y+' L ')+
((x+singleSegmentLength/2)+' '+y);}
else{section.forEach(function(p,i){var x=self.getXPosition(p);var y=self.getYPosition(p,d);if(i==0){path+=('M '+x+' '+y+' C ')+
((x+curveLength)+' '+y+' ');}
else if(i==section.length-1){path+=((x-curveLength)+' '+y+' ')+
(x+' '+y+' ');}
else{path+=((x-curveLength)+' '+y+' ')+
(x+' '+y+' ')+
((x+curveLength)+' '+y+' ');}});}});return path;}
CINEMA_COMPONENTS.Pcoord.prototype.getXPosition=function(d){var v=this.dragging[d];return v==null?this.x(d):v;};CINEMA_COMPONENTS.Pcoord.prototype.getYPosition=function(d,p){if(!this.db.isStringDimension(d)&&isNaN(p[d]))
return this.internalHeight;return this.y[d](p[d]);}
function arraysEqual(a,b){if(a===b)return true;if(a==null||b==null)return false;if(a.length!=b.length)return false;for(var i=0;i<a.length;++i){if(a[i]!==b[i])return false;}
return true;}})();'use strict';(function(){var CINEMA_COMPONENTS={}
if(window.CINEMA_COMPONENTS)
CINEMA_COMPONENTS=window.CINEMA_COMPONENTS;else
window.CINEMA_COMPONENTS=CINEMA_COMPONENTS;if(!CINEMA_COMPONENTS.PCOORD_INCLUDED)
throw new Error("CINEMA_COMPONENTS PcoordSVG Component requires that Pcoord"+" component be included. Please make sure that Pcoord component"+" is included BEFORE PcoordSVG module");CINEMA_COMPONENTS.PCOORDSVG_INCLUDED=true;CINEMA_COMPONENTS.PcoordSVG=function(parent,database,filterRegex){CINEMA_COMPONENTS.Pcoord.call(this,parent,database,filterRegex);d3.select(this.container).classed('SVG',true);this.svg=this.pathContainer.append('svg').style('position','absolute').attr('viewBox',(-this.margin.right)+' '+(-this.margin.top)+' '+
(this.parentRect.width)+' '+
(this.parentRect.height)).attr('preserveAspectRatio','none').attr('width','100%').attr('height','100%');this.selectedPaths=this.svg.append('g').classed('selectedPaths',true);this.highlightedPaths=this.svg.append('g').classed('highlightedPaths',true);this.overlayPaths=this.svg.append('g').classed('overlayPaths',true);this.onPathMouseover=function(index){this.dispatch.call("mouseover",this,index,d3.event);}
this.onPathClick=function(index){this.dispatch.call("click",this,index,d3.event);}
this.redrawPaths();}
CINEMA_COMPONENTS.PcoordSVG.prototype=Object.create(CINEMA_COMPONENTS.Pcoord.prototype);CINEMA_COMPONENTS.PcoordSVG.prototype.constructor=CINEMA_COMPONENTS.PcoordSVG;CINEMA_COMPONENTS.PcoordSVG.prototype.updateSize=function(){CINEMA_COMPONENTS.Pcoord.prototype.updateSize.call(this);this.svg.attr('viewBox',(-this.margin.right)+' '+(-this.margin.top)+' '+
(this.parentRect.width)+' '+
(this.parentRect.height));}
CINEMA_COMPONENTS.PcoordSVG.prototype.redrawSelectedPaths=function(){var self=this;var update=this.selectedPaths.selectAll('path').data(this.selection);update.enter().append('path').merge(update).attr('index',function(d){return d;}).attr('d',function(d){return self.getPath(self.db.data[d]);}).on('mouseenter',function(d){self.dispatch.call("mouseover",self,d,d3.event);}).on('mouseleave',function(d){self.dispatch.call("mouseover",self,null,d3.event);}).on('click',function(d){self.dispatch.call("click",self,d);});update.exit().remove();}
CINEMA_COMPONENTS.PcoordSVG.prototype.redrawHighlightedPaths=function(){var self=this;var update=this.highlightedPaths.selectAll('path').data(this.highlighted);update.enter().append('path').merge(update).attr('index',function(d){return d;}).attr('d',function(d){return self.getPath(self.db.data[d]);});update.exit().remove();}
CINEMA_COMPONENTS.PcoordSVG.prototype.redrawOverlayPaths=function(){var self=this;var update=this.overlayPaths.selectAll('path').data(this.overlayData);update.enter().append('path').merge(update).attr('style',function(d){return d.style;}).attr('d',function(d){return self.getPath(d.data);});update.exit().remove();}})();